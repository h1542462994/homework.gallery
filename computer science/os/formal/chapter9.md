# 文件系统

## 时间

- 寻道时间$T_s$
- 旋转延迟时间$T_r$
- 传输时间$T_t$

$$T_a=T_s+T_r+T_t=T_s+\frac{1}{2}r+\frac{b}{rN}$$

$$T_s=m\times n\downarrow+s$$

## 磁盘（移臂）算法

- 先来先服务（FIFS）
- 最短寻道时间优先（SSTF）、饥饿现象
- 扫描算法，电梯调度算法（SCAN）
- 循环扫描（CSCAN）
- N-Step-SCAN，解决**磁盘粘连的现象**，组内使用SCAN，组间使用FCFS算法。

## 磁盘高速缓冲（Disk Cache）

## 文件管理

- 域/数据项
- 记录
- 文件
- 数据库

## 文件的组织

文件分为流文件和记录型文件

### 逻辑组织（记录型文件）

- 堆文件（不定长记录）
- 顺序文件（定长记录）
- 索引顺序文件（定长记录）
- 索引文件（不定长记录）
- 直接文件或散列文件（定长记录）

### 文件目录（FCB）的信息单元

- 基本信息
  - 文件名：同一个目录中必须是唯一的
  - 文件类型
  - 文件组织 
- 地址信息
  - 卷、起始地址、??
- 多级目录

### 文件共享

- 多用户系统中，可以使用读者、写者模型来决定。

## 记录组块

- 固定组块
- 可变长度跨越式组块（不常用）
- 可变长度非跨越式组块

## 二级存储管理

- 文件分配表（FAT表）
  
### 分区大小

- 可变的大连续分配
  - 大小可变避免浪费现象，性能较好
  - 分区比较大，一个文件划分的分区个数就比较少，因此FAT表比较少
  - 空间很难再利用
- 块


### 文件分配的方法
    
- 第一种方法：连续分配（Contigous allocation）
    - FAT：记录起始块和文件长度。
- 第二种方法：链式分配（Link allocation）
- 第三种方法：索引分配（Index allocation）

### 空闲区

- 位表（Bitmap）
- 链式空闲区（Chained free portition）
- 索引（Indexing）

