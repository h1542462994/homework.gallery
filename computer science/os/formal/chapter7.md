# 内存管理

## 内存分配

### 连续分配

固定分区：存在内部碎片

动态分区：存在外部碎片

伙伴分区：$2^n$，存在内部碎片

### 不连续分配（离散分配）

#### 分页

页表：

页号&lt;页表程度

帧号*页大小+页内地址。

#### 分段

段表：

## 虚拟内存

局部性原理

避免抖动（thrashing）现象，即处理器大部分时间都用于交换块，而不是执行指令。

特征：离散性、多次性、对换性、虚拟性

### 快表（Translation Lookaside Buffer）

每个页表项包括页号和相应的块号。

- 处理器首先将逻辑地址中的页号与TLB中的各页表项的页号进行比较
- TLB命中，则直接从TLB的输出寄存器输出相应的块号
- 如果没有找到（TLB不命中），查页表
- 检查该页是否在内存中，如果不在，则发生缺页中断。

## 算法

### 取策略

- 加载策略
- 放置策略
- 替换策略（Replacement Policy）

OPT：最佳置换算法
FIFO：先进先出队列管理
LRU：最近最久未使用
CLOCK：时钟算法

## 驻留集管理

- 固定分配
- 可变分配
- 局部替换
- 全局替换

### 清除策略

- 请求时清除：请求式清除
- 预约式清除：成批地写回
- 可采用页缓冲技术提高性能：修改列表中的页周期性地成批写出，未修改列表的页如果替换时可直接淘汰。