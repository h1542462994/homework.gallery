## C++ 第二次实验作业 停车收费系统（包含时间的处理）

***

### 实验目的：实现一个按照一定规则按时间收费的停车系统，要求能够做到拦截错误输入，解析时间字符串的输入，并有一定的交互。

### 实验构思：

- 一个日期时间类(datetime)，其中仅含一个字段_tick，用于记录现在到1970/1/1 0:00:00走过的毫秒数。并设计一系列的函数能够实验时间戳到具体时间的相互转换，并进行字符串的解析。

- 设计一个时间间隔类(timespan)，其中仅含一个字段_tick，用于记录时间间隔，封装函数让实现更加优雅，并添加datetime和timespan之间的运算符。

- 设计一个时区类(timezone)，来进行utc和本地时间的相互转换。

- 设计一个停车类(park)，来进行记录停车和离开的时间，并按照一定标准计算收费。

### 实验过程：

#### A关键函数

```cpp
class datetime
{
	…
	static ld caculatedays(int year, int month, int day); //计算某一天距离1970/1/1 的天数
	static void getdatefromdays(int days, int *year, int *month, int *day);//按照天数推算日期
	static void gettimefromtick(int tick, int *hour, int *minute, int *second);//按照秒数推算时间
	…
};
```

#### B 运行截图
 

### 实验总结

#### A 能够实现的功能

- 能够正确的计算车费，而且能够跨日停放。
- 筛选错误的输入。

#### B 程序中遇到的bug，现已修复

- 计算闰年时，条件判断错误，导致日期的推算出现异常。
- 变量名写错的bug。

#### C 点子

- 用const标记不需要修改成员的函数。
- 学习了重载操作符的运算。
- 调试bug需要耐心，更需要细心。
- 关于时间处理，最好是以一个时刻为基准点，计算以秒计数的时长。
- 最好关注时间的输入是否正确，筛选掉不正确的输入。
